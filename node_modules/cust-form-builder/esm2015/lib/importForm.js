/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @param {?} formPath
 * @return {?}
 */
export function importForm(formPath) {
    /** @type {?} */
    const fsys = require('fs');
    /** @type {?} */
    const pathh = require('path');
    try {
        /** @type {?} */
        var form = JSON.parse(fsys.readFileSync(`${formPath}.json`, 'utf8'));
    }
    catch (e) {
        console.log('ERROR importForm() reading the custom form json file :' + e);
    }
    /** @type {?} */
    var htmlForm = `<div class="custom-form" name="${formPath.substring(formPath.lastIndexOf('/') + 1)}">`;
    for (var page in form['layout']['pages']) {
        htmlForm += `<form id="${form['layout']['pages'][page]['id']}" title="${form['layout']['pages'][page]['title']}"`;
        if (form['layout']['pages'][page]['state']['visible']) {
            htmlForm += ` visibility="${form['layout']['pages'][page]['state']['visible']}"`;
        }
        htmlForm += `>`;
        for (var section in form['layout']['pages'][page]['sections']) {
            htmlForm += `<section id="${form['layout']['pages'][page]['sections'][section]['id']}">`;
            for (var field in form['layout']['pages'][page]['sections'][section]['fields']) {
                /** @type {?} */
                var fieldID = form['layout']['pages'][page]['sections'][section]['fields'][field]['id'];
                /** @type {?} */
                var basicAttributes = `id="${fieldID}"
                    visibility="${JSON.stringify(form['layout']['pages'][page]['sections'][section]['fields'][field]['state']['visible']).replace(/\"/g, '\'')}"
                    readonly="${JSON.stringify(form['layout']['pages'][page]['sections'][section]['fields'][field]['state']['read-only']).replace(/\"/g, '\'')}"`;
                /** @type {?} */
                var closingTag = ``;
                /** @type {?} */
                var fieldType = form['layout']['pages'][page]['sections'][section]['fields'][field]['display'];
                switch (fieldType) {
                    case 'text':
                        htmlForm += `<label ` + basicAttributes;
                        closingTag = `</label>`;
                        break;
                    case 'textArea':
                        htmlForm += `<textarea ` + basicAttributes;
                        closingTag = `</textarea>`;
                        break;
                    case 'textField':
                        htmlForm += `<input type="text" ` + basicAttributes;
                        break;
                    case 'passwordField':
                        htmlForm += `<input type="password" ` + basicAttributes;
                        break;
                    case 'decimalField':
                        htmlForm += `<input type="number" step ="0."` + basicAttributes;
                        break;
                    case 'integerField':
                        htmlForm += `<input type="number" ` + basicAttributes;
                        break;
                    case 'image':
                        htmlForm += `<img ` + basicAttributes;
                        break;
                    case 'checkbox':
                        htmlForm += `<input type="checkbox" ` + basicAttributes;
                        break;
                    case 'dropDown':
                        htmlForm += `<select ` + basicAttributes;
                        closingTag = `</select>`;
                        break;
                    case 'multiSelect':
                        htmlForm += `<select multiple="true" ` + basicAttributes;
                        closingTag = `</select>`;
                        break;
                    case 'datagrid':
                        htmlForm += `<table ` + basicAttributes;
                        closingTag = `</table>`;
                        break;
                }
                if (form['schema'][fieldID]['constraints']) {
                    if (form['schema'][fieldID]['constraints']['required']) {
                        htmlForm += ` required="${JSON.stringify(form['schema'][fieldID]['constraints']['required']).replace(/\"/g, '\'')}"`;
                    }
                    if (form['schema'][fieldID]['constraints']['min-value']) {
                        htmlForm += ` min="${JSON.stringify(form['schema'][fieldID]['constraints']['min-value']).replace(/\"/g, '\'')}"`;
                    }
                    if (form['schema'][fieldID]['constraints']['max-value']) {
                        htmlForm += ` max="${JSON.stringify(form['schema'][fieldID]['constraints']['max-value']).replace(/\"/g, '\'')}"`;
                    }
                    if (form['schema'][fieldID]['constraints']['pattern']) {
                        htmlForm += ` regex="${JSON.stringify({
                            value: form['schema'][fieldID]['constraints']['pattern']['value'],
                            message: form['schema'][fieldID]['constraints']['pattern']['message']
                        }).replace(/\"/g, '\'')}"`;
                    }
                    if (form['schema'][fieldID]['constraints']['match']) {
                        htmlForm += ` match="${JSON.stringify(form['schema'][fieldID]['constraints']['match']).replace(/\"/g, '\'')}"`;
                    }
                }
                if (form['schema'][fieldID]['default']) {
                    if (form['schema'][fieldID]['default']['type'] == 'scriptAction' ||
                        Array.isArray(form['schema'][fieldID]['default'])) {
                        htmlForm += ` value="${JSON.stringify(form['schema'][fieldID]['default']).replace(/\"/g, '\'')}"`;
                        // .replace(/\{/g, '{{ \'{\' }}').replace(/\}/g, '{{ \'}\' }}')}"`;
                    }
                    else if (form['schema'][fieldID]['default']['bind']) {
                        if (JSON.stringify(form['schema'][fieldID]['default']['bind']).startsWith('{')) {
                            htmlForm += ` bind="${JSON.stringify(form['schema'][fieldID]['default']['bind']).replace(/\"/g, '\'')}"`;
                        }
                        else {
                            htmlForm += ` bind="${JSON.stringify(form['schema'][fieldID]['default']['bind']).replace(/\"/g, '')}"`;
                        }
                    }
                    else {
                        htmlForm += ` value="${JSON.stringify(form['schema'][fieldID]['default']).replace(/\"/g, '')}"`;
                    }
                }
                if (form['schema'][fieldID]['valueList']) {
                    if (form['schema'][fieldID]['valueList']['type'] == 'scriptAction') {
                        htmlForm += ` valueList="${JSON.stringify(form['schema'][fieldID]['valueList']).replace(/\"/g, '\'')}"`;
                        // .replace(/\{/g, '{{ \'{\' }}').replace(/\}/g, '{{ \'}\' }}')}"`;
                    }
                    else {
                        /** @type {?} */
                        var valueList = ``;
                        for (var opt in form['schema'][fieldID]['valueList']) {
                            if (form['schema'][fieldID]['valueList'][opt]['label']) {
                                valueList += `<option label="${form['schema'][fieldID]['valueList'][opt]['label']}">${form['schema'][fieldID]['valueList'][opt]['label']}</option>`;
                            }
                            else {
                                valueList += `<option>${JSON.stringify(form['schema'][fieldID]['valueList'][opt]).replace(/\"/g, '')}</option>`;
                            }
                        }
                    }
                }
                if (form['schema'][fieldID]['label']) {
                    htmlForm += ` label="${form['schema'][fieldID]['label']}"`;
                }
                if (form['schema'][fieldID]['description']) {
                    htmlForm += ` description="${JSON.stringify(form['schema'][fieldID]['description']).replace(/\"/g, '')}"`;
                }
                if (form['schema'][fieldID]['signpost']) {
                    htmlForm += ` signpost="${JSON.stringify(form['schema'][fieldID]['signpost']).replace(/\"/g, '\'')}"`;
                }
                if (form['schema'][fieldID]['step']) {
                    htmlForm += ` step="${JSON.stringify(form['schema'][fieldID]['step']).replace(/\"/g, '\'')}"`;
                }
                if (form['schema'][fieldID]['placeholder']) {
                    htmlForm += ` step="${JSON.stringify(form['schema'][fieldID]['placeholder']).replace(/\"/g, '')}"`;
                }
                //      DATAGRID
                if (form['schema'][fieldID]['type']['fields']) {
                    /** @type {?} */
                    var dgFields = `<tr id='cols'>`;
                    for (var fld in form['schema'][fieldID]['type']['fields']) {
                        dgFields += `<th id='` + form['schema'][fieldID]['type']['fields'][fld]['id'] + `' `
                            + `type='` + form['schema'][fieldID]['type']['fields'][fld]['type']['dataType'] + `' `
                            + `description='` + form['schema'][fieldID]['type']['fields'][fld]['id'] + `'>`
                            + form['schema'][fieldID]['type']['fields'][fld]['label'] + `</th>`;
                    }
                    dgFields += `</tr>`;
                    if (form['schema'][fieldID]['default']) {
                        /** @type {?} */
                        var dgData = ``;
                        if (form['schema'][fieldID]['default']['type'] == "scriptAction") {
                            dgData += `<tr id='data' value="${JSON.stringify(form['schema'][fieldID]['default']).replace(/\"/g, '\'')}" ></tr>`;
                        }
                        else {
                            /** @type {?} */
                            var colsLen = form['schema'][fieldID]['type']['fields'].length;
                            /** @type {?} */
                            var cnt = 0;
                            for (var entity in form['schema'][fieldID]['default']) {
                                dgData += `<tr id='data'>`;
                                for (var data in form['schema'][fieldID]['default'][entity]) {
                                    if (cnt < colsLen) {
                                        dgData += `<td>` + form['schema'][fieldID]['default'][entity][data] + `</td>`;
                                        cnt++;
                                    }
                                }
                                dgData += `</tr>`;
                            }
                        }
                    }
                }
                if (form['options']['externalValidations']) {
                    for (var extVal in form['options']['externalValidations']) {
                        for (var id in form['options']['externalValidations'][extVal]['target']) {
                            if (fieldID == form['options']['externalValidations'][extVal]['target'][id]) {
                                htmlForm += ` options="${JSON.stringify(form['options']['externalValidations'][extVal]).replace(/\"/g, '\'')}"`;
                            }
                        }
                    }
                }
                htmlForm += `>`;
                if ((fieldType == 'dropDown' || fieldType == 'multiSelect') && valueList) {
                    htmlForm += valueList;
                    valueList = ``;
                }
                //      DATAGRID
                if (fieldType == 'datagrid') {
                    htmlForm += dgFields;
                    htmlForm += dgData;
                }
                htmlForm += closingTag;
            }
            htmlForm += `</section>`;
        }
        htmlForm += `</form>`;
    }
    htmlForm += `</div>`;
    try {
        // fsys.truncateSync(pathh.join('src/app', 'app.component.html'), '');
        fsys.writeFileSync(pathh.join('src/app', 'app.component.html'), htmlForm);
    }
    catch (e) {
        console.log('ERROR importForm() writing to the app.component.html file:' + e);
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1wb3J0Rm9ybS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2N1c3QtZm9ybS1idWlsZGVyLyIsInNvdXJjZXMiOlsibGliL2ltcG9ydEZvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxNQUFNLHFCQUFxQixRQUFROztJQUMvQixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7O0lBQzNCLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUU5QixJQUFJOztRQUNBLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLFFBQVEsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7S0FDeEU7SUFDRCxPQUFPLENBQUMsRUFBRTtRQUNOLE9BQU8sQ0FBQyxHQUFHLENBQUMsd0RBQXdELEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDN0U7O0lBQ0QsSUFBSSxRQUFRLEdBQUcsa0NBQWtDLFFBQVEsQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBRXZHLEtBQUssSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ3RDLFFBQVEsSUFBSSxhQUFhLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztRQUNsSCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNuRCxRQUFRLElBQUksZ0JB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ekIsUUFBUSxJQUFJLFFBQVEsQ0FBQztvQkFDckIsUUFBUSxJQUFJLE1BQU0sQ0FBQztpQkFFdEI7Z0JBQ0QsUUFBUSxJQUFJLFVBQVUsQ0FBQzthQUMxQjtZQUNELFFBQVEsSUFBSSxZQUFZLENBQUM7U0FDNUI7UUFDRCxRQUFRLElBQUksU0FBUyxDQUFDO0tBQ3pCO0lBR0QsUUFBUSxJQUFJLFFBQVEsQ0FBQTtJQUVwQixJQUFJOztRQUVBLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsb0JBQW9CLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztLQUM3RTtJQUNELE9BQU8sQ0FBQyxFQUFFO1FBQ04sT0FBTyxDQUFDLEdBQUcsQ0FBQyw0REFBNEQsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNqRjtDQUVKIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGltcG9ydEZvcm0oZm9ybVBhdGgpIHtcbiAgICBjb25zdCBmc3lzID0gcmVxdWlyZSgnZnMnKTtcbiAgICBjb25zdCBwYXRoaCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuICAgIHRyeSB7XG4gICAgICAgIHZhciBmb3JtID0gSlNPTi5wYXJzZShmc3lzLnJlYWRGaWxlU3luYyhgJHtmb3JtUGF0aH0uanNvbmAsICd1dGY4JykpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRVJST1IgaW1wb3J0Rm9ybSgpIHJlYWRpbmcgdGhlIGN1c3RvbSBmb3JtIGpzb24gZmlsZSA6JyArIGUpO1xuICAgIH1cbiAgICB2YXIgaHRtbEZvcm0gPSBgPGRpdiBjbGFzcz1cImN1c3RvbS1mb3JtXCIgbmFtZT1cIiR7Zm9ybVBhdGguc3Vic3RyaW5nKGZvcm1QYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKX1cIj5gO1xuXG4gICAgZm9yICh2YXIgcGFnZSBpbiBmb3JtWydsYXlvdXQnXVsncGFnZXMnXSkge1xuICAgICAgICBodG1sRm9ybSArPSBgPGZvcm0gaWQ9XCIke2Zvcm1bJ2xheW91dCddWydwYWdlcyddW3BhZ2VdWydpZCddfVwiIHRpdGxlPVwiJHtmb3JtWydsYXlvdXQnXVsncGFnZXMnXVtwYWdlXVsndGl0bGUnXX1cImA7XG4gICAgICAgIGlmIChmb3JtWydsYXlvdXQnXVsncGFnZXMnXVtwYWdlXVsnc3RhdGUnXVsndmlzaWJsZSddKSB7XG4gICAgICAgICAgICBodG1sRm9ybSArPSBgIHZpc2liaWxpdHk9XCIke2Zvcm1bJ2xheW91dCddWydwYWdlcyddW3BhZ2VdWydzdGF0ZSddWyd2aXNpYmxlJ119XCJgO1xuICAgICAgICB9XG4gICAgICAgIGh0bWxGb3JtICs9IGA+YDtcbiAgICAgICAgZm9yICh2YXIgc2VjdGlvbiBpbiBmb3JtWydsYXlvdXQnXVsncGFnZXMnXVtwYWdlXVsnc2VjdGlvbnMnXSkge1xuICAgICAgICAgICAgaHRtbEZvcm0gKz0gYDxzZWN0aW9uIGlkPVwiJHtmb3JtWydsYXlvdXQnXVsncGFnZXMnXVtwYWdlXVsnc2VjdGlvbnMnXVtzZWN0aW9uXVsnaWQnXX1cIj5gO1xuICAgICAgICAgICAgZm9yICh2YXIgZmllbGQgaW4gZm9ybVsnbGF5b3V0J11bJ3BhZ2VzJ11bcGFnZV1bJ3NlY3Rpb25zJ11bc2VjdGlvbl1bJ2ZpZWxkcyddKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZmllbGRJRCA9IGZvcm1bJ2xheW91dCddWydwYWdlcyddW3BhZ2VdWydzZWN0aW9ucyddW3NlY3Rpb25dWydmaWVsZHMnXVtmaWVsZF1bJ2lkJ107XG4gICAgICAgICAgICAgICAgdmFyIGJhc2ljQXR0cmlidXRlcyA9IGBpZD1cIiR7ZmllbGRJRH1cIlxuICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5PVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydsYXlvdXQnXVsncGFnZXMnXVtwYWdlXVsnc2VjdGlvbnMnXVtzZWN0aW9uXVsnZmllbGRzJ11bZmllbGRdWydzdGF0ZSddWyd2aXNpYmxlJ10pLnJlcGxhY2UoL1xcXCIvZywgJ1xcJycpfVwiXG4gICAgICAgICAgICAgICAgICAgIHJlYWRvbmx5PVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydsYXlvdXQnXVsncGFnZXMnXVtwYWdlXVsnc2VjdGlvbnMnXVtzZWN0aW9uXVsnZmllbGRzJ11bZmllbGRdWydzdGF0ZSddWydyZWFkLW9ubHknXSkucmVwbGFjZSgvXFxcIi9nLCAnXFwnJyl9XCJgO1xuICAgICAgICAgICAgICAgIHZhciBjbG9zaW5nVGFnID0gYGA7XG4gICAgICAgICAgICAgICAgdmFyIGZpZWxkVHlwZSA9IGZvcm1bJ2xheW91dCddWydwYWdlcyddW3BhZ2VdWydzZWN0aW9ucyddW3NlY3Rpb25dWydmaWVsZHMnXVtmaWVsZF1bJ2Rpc3BsYXknXTtcblxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChmaWVsZFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgPGxhYmVsIGAgKyBiYXNpY0F0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nVGFnID0gYDwvbGFiZWw+YFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRBcmVhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGA8dGV4dGFyZWEgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NpbmdUYWcgPSBgPC90ZXh0YXJlYT5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRGaWVsZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXNzd29yZEZpZWxkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGA8aW5wdXQgdHlwZT1cInBhc3N3b3JkXCIgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZWNpbWFsRmllbGQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgc3RlcCA9XCIwLlwiYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpbnRlZ2VyRmllbGQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYDxpbnB1dCB0eXBlPVwibnVtYmVyXCIgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpbWFnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgPGltZyBgICsgYmFzaWNBdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdkcm9wRG93bic6XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgPHNlbGVjdCBgICsgYmFzaWNBdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1RhZyA9IGA8L3NlbGVjdD5gXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbXVsdGlTZWxlY3QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYDxzZWxlY3QgbXVsdGlwbGU9XCJ0cnVlXCIgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NpbmdUYWcgPSBgPC9zZWxlY3Q+YFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGFncmlkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGA8dGFibGUgYCArIGJhc2ljQXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NpbmdUYWcgPSBgPC90YWJsZT5gXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2NvbnN0cmFpbnRzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydjb25zdHJhaW50cyddWydyZXF1aXJlZCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgIHJlcXVpcmVkPVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnY29uc3RyYWludHMnXVsncmVxdWlyZWQnXSkucmVwbGFjZSgvXFxcIi9nLCAnXFwnJyl9XCJgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnY29uc3RyYWludHMnXVsnbWluLXZhbHVlJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgbWluPVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnY29uc3RyYWludHMnXVsnbWluLXZhbHVlJ10pLnJlcGxhY2UoL1xcXCIvZywgJ1xcJycpfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2NvbnN0cmFpbnRzJ11bJ21heC12YWx1ZSddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgIG1heD1cIiR7SlNPTi5zdHJpbmdpZnkoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2NvbnN0cmFpbnRzJ11bJ21heC12YWx1ZSddKS5yZXBsYWNlKC9cXFwiL2csICdcXCcnKX1cImA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydjb25zdHJhaW50cyddWydwYXR0ZXJuJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgcmVnZXg9XCIke0pTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2NvbnN0cmFpbnRzJ11bJ3BhdHRlcm4nXVsndmFsdWUnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnY29uc3RyYWludHMnXVsncGF0dGVybiddWydtZXNzYWdlJ11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnJlcGxhY2UoL1xcXCIvZywgJ1xcJycpfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2NvbnN0cmFpbnRzJ11bJ21hdGNoJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgbWF0Y2g9XCIke0pTT04uc3RyaW5naWZ5KGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydjb25zdHJhaW50cyddWydtYXRjaCddKS5yZXBsYWNlKC9cXFwiL2csICdcXCcnKX1cImA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2RlZmF1bHQnXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2RlZmF1bHQnXVsndHlwZSddID09ICdzY3JpcHRBY3Rpb24nIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydkZWZhdWx0J10pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgIHZhbHVlPVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnZGVmYXVsdCddKS5yZXBsYWNlKC9cXFwiL2csICdcXCcnKX1cImA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAucmVwbGFjZSgvXFx7L2csICd7eyBcXCd7XFwnIH19JykucmVwbGFjZSgvXFx9L2csICd7eyBcXCd9XFwnIH19Jyl9XCJgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydkZWZhdWx0J11bJ2JpbmQnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydkZWZhdWx0J11bJ2JpbmQnXSkuc3RhcnRzV2l0aCgneycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYCBiaW5kPVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnZGVmYXVsdCddWydiaW5kJ10pLnJlcGxhY2UoL1xcXCIvZywgJ1xcJycpfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgYmluZD1cIiR7SlNPTi5zdHJpbmdpZnkoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2RlZmF1bHQnXVsnYmluZCddKS5yZXBsYWNlKC9cXFwiL2csICcnKX1cImA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgdmFsdWU9XCIke0pTT04uc3RyaW5naWZ5KGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydkZWZhdWx0J10pLnJlcGxhY2UoL1xcXCIvZywgJycpfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3ZhbHVlTGlzdCddKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWyd2YWx1ZUxpc3QnXVsndHlwZSddID09ICdzY3JpcHRBY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBgIHZhbHVlTGlzdD1cIiR7SlNPTi5zdHJpbmdpZnkoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3ZhbHVlTGlzdCddKS5yZXBsYWNlKC9cXFwiL2csICdcXCcnKX1cImA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAucmVwbGFjZSgvXFx7L2csICd7eyBcXCd7XFwnIH19JykucmVwbGFjZSgvXFx9L2csICd7eyBcXCd9XFwnIH19Jyl9XCJgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlTGlzdCA9IGBgO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb3B0IGluIGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWyd2YWx1ZUxpc3QnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsndmFsdWVMaXN0J11bb3B0XVsnbGFiZWwnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZUxpc3QgKz0gYDxvcHRpb24gbGFiZWw9XCIke2Zvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWyd2YWx1ZUxpc3QnXVtvcHRdWydsYWJlbCddfVwiPiR7Zm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3ZhbHVlTGlzdCddW29wdF1bJ2xhYmVsJ119PC9vcHRpb24+YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlTGlzdCArPSBgPG9wdGlvbj4ke0pTT04uc3RyaW5naWZ5KGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWyd2YWx1ZUxpc3QnXVtvcHRdKS5yZXBsYWNlKC9cXFwiL2csICcnKX08L29wdGlvbj5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2xhYmVsJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYCBsYWJlbD1cIiR7Zm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2xhYmVsJ119XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2Rlc2NyaXB0aW9uJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYCBkZXNjcmlwdGlvbj1cIiR7SlNPTi5zdHJpbmdpZnkoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2Rlc2NyaXB0aW9uJ10pLnJlcGxhY2UoL1xcXCIvZywgJycpfVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydzaWducG9zdCddKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgc2lnbnBvc3Q9XCIke0pTT04uc3RyaW5naWZ5KGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydzaWducG9zdCddKS5yZXBsYWNlKC9cXFwiL2csICdcXCcnKX1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnc3RlcCddKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgc3RlcD1cIiR7SlNPTi5zdHJpbmdpZnkoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3N0ZXAnXSkucmVwbGFjZSgvXFxcIi9nLCAnXFwnJyl9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3BsYWNlaG9sZGVyJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gYCBzdGVwPVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsncGxhY2Vob2xkZXInXSkucmVwbGFjZSgvXFxcIi9nLCAnJyl9XCJgO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vICAgICAgREFUQUdSSURcblxuICAgICAgICAgICAgICAgIGlmIChmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsndHlwZSddWydmaWVsZHMnXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGdGaWVsZHMgPSBgPHRyIGlkPSdjb2xzJz5gO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmbGQgaW4gZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3R5cGUnXVsnZmllbGRzJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRnRmllbGRzICs9IGA8dGggaWQ9J2AgKyBmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsndHlwZSddWydmaWVsZHMnXVtmbGRdWydpZCddICsgYCcgYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYHR5cGU9J2AgKyBmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsndHlwZSddWydmaWVsZHMnXVtmbGRdWyd0eXBlJ11bJ2RhdGFUeXBlJ10gKyBgJyBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBgZGVzY3JpcHRpb249J2AgKyBmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsndHlwZSddWydmaWVsZHMnXVtmbGRdWydpZCddICsgYCc+YFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ3R5cGUnXVsnZmllbGRzJ11bZmxkXVsnbGFiZWwnXSArIGA8L3RoPmA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGdGaWVsZHMgKz0gYDwvdHI+YDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2RlZmF1bHQnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRnRGF0YSA9IGBgO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydkZWZhdWx0J11bJ3R5cGUnXSA9PSBcInNjcmlwdEFjdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGdEYXRhICs9IGA8dHIgaWQ9J2RhdGEnIHZhbHVlPVwiJHtKU09OLnN0cmluZ2lmeShmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnZGVmYXVsdCddKS5yZXBsYWNlKC9cXFwiL2csICdcXCcnKX1cIiA+PC90cj5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHNMZW4gPSBmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsndHlwZSddWydmaWVsZHMnXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZW50aXR5IGluIGZvcm1bJ3NjaGVtYSddW2ZpZWxkSURdWydkZWZhdWx0J10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGdEYXRhICs9IGA8dHIgaWQ9J2RhdGEnPmA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGRhdGEgaW4gZm9ybVsnc2NoZW1hJ11bZmllbGRJRF1bJ2RlZmF1bHQnXVtlbnRpdHldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY250IDwgY29sc0xlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRnRGF0YSArPSBgPHRkPmAgKyBmb3JtWydzY2hlbWEnXVtmaWVsZElEXVsnZGVmYXVsdCddW2VudGl0eV1bZGF0YV0gKyBgPC90ZD5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRnRGF0YSArPSBgPC90cj5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmb3JtWydvcHRpb25zJ11bJ2V4dGVybmFsVmFsaWRhdGlvbnMnXSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBleHRWYWwgaW4gZm9ybVsnb3B0aW9ucyddWydleHRlcm5hbFZhbGlkYXRpb25zJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlkIGluIGZvcm1bJ29wdGlvbnMnXVsnZXh0ZXJuYWxWYWxpZGF0aW9ucyddW2V4dFZhbF1bJ3RhcmdldCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkSUQgPT0gZm9ybVsnb3B0aW9ucyddWydleHRlcm5hbFZhbGlkYXRpb25zJ11bZXh0VmFsXVsndGFyZ2V0J11baWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGAgb3B0aW9ucz1cIiR7SlNPTi5zdHJpbmdpZnkoZm9ybVsnb3B0aW9ucyddWydleHRlcm5hbFZhbGlkYXRpb25zJ11bZXh0VmFsXSkucmVwbGFjZSgvXFxcIi9nLCAnXFwnJyl9XCJgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGA+YDtcbiAgICAgICAgICAgICAgICBpZiAoKGZpZWxkVHlwZSA9PSAnZHJvcERvd24nIHx8IGZpZWxkVHlwZSA9PSAnbXVsdGlTZWxlY3QnKSAmJiB2YWx1ZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gdmFsdWVMaXN0O1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZUxpc3QgPSBgYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgICBEQVRBR1JJRFxuICAgICAgICAgICAgICAgIGlmIChmaWVsZFR5cGUgPT0gJ2RhdGFncmlkJykge1xuICAgICAgICAgICAgICAgICAgICBodG1sRm9ybSArPSBkZ0ZpZWxkcztcbiAgICAgICAgICAgICAgICAgICAgaHRtbEZvcm0gKz0gZGdEYXRhO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGh0bWxGb3JtICs9IGNsb3NpbmdUYWc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodG1sRm9ybSArPSBgPC9zZWN0aW9uPmA7XG4gICAgICAgIH1cbiAgICAgICAgaHRtbEZvcm0gKz0gYDwvZm9ybT5gO1xuICAgIH1cblxuXG4gICAgaHRtbEZvcm0gKz0gYDwvZGl2PmBcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIGZzeXMudHJ1bmNhdGVTeW5jKHBhdGhoLmpvaW4oJ3NyYy9hcHAnLCAnYXBwLmNvbXBvbmVudC5odG1sJyksICcnKTtcbiAgICAgICAgZnN5cy53cml0ZUZpbGVTeW5jKHBhdGhoLmpvaW4oJ3NyYy9hcHAnLCAnYXBwLmNvbXBvbmVudC5odG1sJyksIGh0bWxGb3JtKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SIGltcG9ydEZvcm0oKSB3cml0aW5nIHRvIHRoZSBhcHAuY29tcG9uZW50Lmh0bWwgZmlsZTonICsgZSk7XG4gICAgfVxuXG59XG4iXX0=