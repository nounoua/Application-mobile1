/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @return {?}
 */
export function prerend() {
    require('zone.js/dist/zone-node');
    require('reflect-metadata');
    var renderModuleFactory = require('@angular/platform-server').renderModuleFactory;
    /** @type {?} */
    var htmlparser = require("htmlparser2");
    /** @type {?} */
    var Layout = function () {
        this.pages = [];
    };
    Layout.prototype.addPage = function (page) {
        this.pages.push(page);
    };
    Layout.prototype.getPage = function (id) {
        for (var i in this.pages) {
            if (this.pages[i].id == id) {
                return this.pages[i];
            }
        }
        return null;
    };
    /** *
     * **************************************
      @type {?} */
    var Canvas = function () {
        this.layout = new Layout();
        this.schema = {};
        this.options = {};
    };
    /** *
     * **************************************
      @type {?} */
    var Page = function (id, sections, title, state) {
        this.id = id;
        this.sections = sections;
        this.title = title;
        this.state = state;
    };
    Page.prototype.addSection = function (section) {
        this.sections.push(section);
    };
    Page.prototype.getSection = function (id) {
        for (var i in this.sections) {
            if (this.sections[i].id == id) {
                return this.sections[i];
            }
        }
        return null;
    };
    Page.prototype.setTitle = function (title) {
        this.title = title;
    };
    /** *
     * **************************************
      @type {?} */
    var Field = function (id, display, state) {
        this.id = id;
        this.display = display;
        this.state = state;
    };
    /** *
     * **************************************
      @type {?} */
    var FieldSchema = function (type, constraints, label, placeholder, valueList) {
        this.type = type;
        this.constraints = constraints || {};
        this.label = label || undefined;
        this.placeholder = placeholder || undefined;
        this.valueList = valueList || undefined;
    };
    /** *
     * **************************************
      @type {?} */
    var State = function () {
        this.visible = true;
        this["read-only"] = false;
    };
    /** *
     * **************************************
      @type {?} */
    var Section = function (id, fields) {
        this.id = id;
        this.fields = fields;
    };
    Section.prototype.addField = function (field) {
        this.fields.push(field);
    };
    Section.prototype.getField = function (id) {
        for (var i in this.fields) {
            if (this.fields[i].id == id) {
                return this.fields[i];
            }
        }
        return null;
    };
    /** *
     * **************************************
      @type {?} */
    var returnID = function (attribID, type) {
        if (attribID == undefined || attribID == "") {
            /** @type {?} */
            var id = type + '_';
            /** @type {?} */
            var r = 'abcdefghijklmnopqrstuvwxyz0123456789';
            for (var i = 0; i < 8; i++) {
                id += r.charAt(Math.floor(Math.random() * r.length));
            }
            return id;
        }
        else {
            return attribID;
        }
    };
    /** *
     * **************************************
      @type {?} */
    var valueSource = function (source, fs, path) {
        if (IsJsonString(source)) {
            /** @type {?} */
            var sourceObj = JSON.parse(source);
            if (sourceObj.hasOwnProperty('actionName')) {
                /** @type {?} */
                var convert = require('xml-js');
                try {
                    /** @type {?} */
                    var xml = fs.readFileSync('../pom.xml');
                }
                catch (e) {
                    console.log('valueSource() reading pom.xml:' + e);
                }
                /** @type {?} */
                var options = {
                    ignoreComment: true,
                    compact: true,
                    ignoreDoctype: true,
                    ignoreCdata: true,
                    ignoreAttributes: true,
                    ignoreInstruction: true,
                    ignoreDeclaration: true,
                };
                /** @type {?} */
                var parsed = convert.xml2js(xml, options);
                /** @type {?} */
                var grpartID = parsed.project.groupId._text + '/' + parsed.project.artifactId._text;
                /** @type {?} */
                var packageInPathFormat = grpartID.replace(/\./g, '/') + '/';
                try {
                    fs.writeFileSync(path.join('actions/src/main/resources/' + packageInPathFormat, sourceObj.actionName + '.js'), sourceObj.action);
                }
                catch (e) {
                    console.log('valueSource() writing action files:' + e);
                }
                /** @type {?} */
                var result = {
                    type: "scriptAction",
                    id: grpartID + "/" + sourceObj.actionName,
                    parameters: sourceObj.parameters
                };
                return result;
            }
            //Check if it's a path to action
            else if (sourceObj.hasOwnProperty('package')) {
                return {
                    type: "scriptAction",
                    id: sourceObj.package,
                    parameters: sourceObj.parameters
                };
            }
            //Checks if it's condition or computed value OR it's Action From Imported Custom Form
            else if (sourceObj.hasOwnProperty('bind') || sourceObj.hasOwnProperty('type')) {
                return sourceObj;
            }
        }
        // If source is some kind of const
        if (source == "true") {
            return true;
        }
        else if (source == "false") {
            return false;
        }
        else if (source.startsWith("[{") || source.startsWith("{") || source.startsWith("['")) {
            try {
                return JSON.parse(source.replace(/\'/g, '\"'));
            }
            catch (e) {
                console.log("valueSource() ---> else if (source.startsWith...: ", e);
            }
        }
        else if (isNaN(parseInt(source))) {
            return source;
        }
        else {
            return parseInt(source);
        }
    };
    /**
     * @param {?} str
     * @return {?}
     */
    function IsJsonString(str) {
        try {
            JSON.parse(str);
        }
        catch (e) {
            return false;
        }
        return true;
    }
    /** *
     * **************************************
      @type {?} */
    var checkAttributes = function (attribs, field, id, canvas, fs, path) {
        if (attribs.visibility) {
            field.state.visible = valueSource(attribs.visibility, fs, path);
        }
        if (attribs.readonly) {
            field.state["read-only"] = valueSource(attribs.readonly, fs, path);
        }
        if (attribs.value) {
            canvas.schema[id].default = valueSource(attribs.value, fs, path);
        }
        if (attribs.valueList) {
            canvas.schema[id].valueList = valueSource(attribs.valueList, fs, path);
        }
        if (attribs.bind) {
            if (attribs.bind.startsWith('{')) {
                try {
                    canvas.schema[id].default = {
                        bind: JSON.parse(attribs.bind.replace(/\'/g, '\"'))
                    };
                }
                catch (e) {
                    console.log("checkAttributes() ---> attribs.bind", e);
                }
            }
            else {
                canvas.schema[id].default = {
                    bind: attribs.bind
                };
            }
        }
        if (attribs.signpost) {
            canvas.schema[id].signpost = attribs.signpost;
        }
        if (attribs.description) {
            canvas.schema[id].description = attribs.description;
        }
        //  Constraints
        if (attribs.required) {
            canvas.schema[id].constraints.required = valueSource(attribs.required, fs, path);
        }
        if (attribs.regex) {
            try {
                /** @type {?} */
                var regexObj = JSON.parse(attribs.regex.replace(/\'/g, '\"'));
            }
            catch (e) {
                console.log("checkAttributes() ---> attribs.regex", e);
            }
            // Object.assign(canvas.schema[id].constraints, regexObj);
            canvas.schema[id].constraints["pattern"] = regexObj;
        }
        if (attribs.min) {
            canvas.schema[id].constraints["min-value"] = valueSource(attribs.min, fs, path);
        }
        if (attribs.max) {
            canvas.schema[id].constraints["max-value"] = valueSource(attribs.max, fs, path);
        }
        if (attribs.match) {
            canvas.schema[id].constraints.match = attribs.match;
        }
        if (!attribs.multiple || attribs.multiple == "false") {
            canvas.schema[id].type.isMultiple = false;
        }
        //External Validation
        if (attribs.options) {
            try {
                /** @type {?} */
                var extVal = JSON.parse(attribs.options.replace(/\'/g, '\"'));
            }
            catch (e) {
                console.log("checkAttributes() ---> attribs.options", e);
            }
            extVal.source = valueSource(JSON.stringify(extVal.source), fs, path);
            canvas.options["externalValidations"] = [];
            canvas.options["externalValidations"].push(extVal);
        }
    };
    /** *
     * **************************************
      @type {?} */
    var generateJSONForm = function (canvas, fs, path, html) {
        canvas = new Canvas();
        /** @type {?} */
        var formName = "";
        /** @type {?} */
        var currentPage = null;
        /** @type {?} */
        var currentSection = null;
        /** @type {?} */
        var currentSelect = null;
        /** @type {?} */
        var options = [];
        /** @type {?} */
        var trID = null;
        /** @type {?} */
        var dgLabels = [];
        /** @type {?} */
        var dgIDs = [];
        /** @type {?} */
        var dgTypes = [];
        /** @type {?} */
        var dgData = [];
        /** @type {?} */
        var currentDatagrid = null;
        /** @type {?} */
        var parser = new htmlparser.Parser({
            onopentag: function (name, attribs) {
                /** @type {?} */
                var field = null;
                /** @type {?} */
                var id = "";
                /** @type {?} */
                var state = new State();
                switch (name) {
                    //The Form
                    case "div":
                        if (attribs.class == "custom-form") {
                            formName = attribs.name;
                        }
                        else {
                            formName = "defautFormName";
                        }
                        break;
                    //  Page/Tab
                    case "form":
                        if (currentPage == null) {
                            currentPage = new Page(attribs.id || "General", [], attribs.title || "General", {});
                        }
                        else {
                            currentPage = new Page(returnID(attribs.id, "page"), [], attribs.title || "New Tab", {});
                        }
                        if (attribs.visibility) {
                            currentPage.state.visible = valueSource(attribs.visibility, fs, path);
                        }
                        canvas.layout.addPage(currentPage);
                        break;
                    //  Section
                    case "section":
                        currentSection = new Section(returnID(attribs.id, "section"), []);
                        canvas.layout.getPage(currentPage.id).addSection(currentSection);
                        break;
                    case "input":
                        switch (attribs.type) {
                            //  Text Field
                            case "text":
                                id = returnID(attribs.id, "textField");
                                field = new Field(id, "textField", state);
                                canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                                canvas.schema[id] = new FieldSchema({ dataType: "string" }, {}, attribs.label, attribs.placeholder, undefined);
                                checkAttributes(attribs, field, id, canvas, fs, path);
                                break;
                            // Password Field
                            case "password":
                                id = returnID(attribs.id, "passwordField");
                                field = new Field(id, "passwordField", state);
                                canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                                canvas.schema[id] = new FieldSchema({ dataType: "secureString" }, {}, attribs.label, attribs.placeholder, undefined);
                                checkAttributes(attribs, field, id, canvas, fs, path);
                                break;
                            // Decimal or Integer Field
                            case "number":
                                if (attribs.step && attribs.step.startsWith("0.")) {
                                    id = returnID(attribs.id, "decimalField");
                                    field = new Field(id, "decimalField", state);
                                    canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                                    canvas.schema[id] = new FieldSchema({ dataType: "decimal" }, {}, attribs.label, attribs.placeholder, undefined);
                                    checkAttributes(attribs, field, id, canvas, fs, path);
                                    canvas.schema[id].step = parseInt(attribs.step);
                                }
                                else {
                                    id = returnID(attribs.id, "integerField");
                                    field = new Field(id, "integerField", state);
                                    canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                                    canvas.schema[id] = new FieldSchema({ dataType: "integer" }, {}, attribs.label, attribs.placeholder, undefined);
                                    checkAttributes(attribs, field, id, canvas, fs, path);
                                    canvas.schema[id].step = parseInt(attribs.step) || 1;
                                }
                                break;
                            // CheckBox
                            case "checkbox":
                                id = returnID(attribs.id, "checkbox");
                                field = new Field(id, "checkbox", state);
                                canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                                canvas.schema[id] = new FieldSchema({ dataType: "boolean" }, {}, attribs.label, attribs.placeholder, undefined);
                                checkAttributes(attribs, field, id, canvas, fs, path);
                                break;
                        }
                        break;
                    //  Text Area
                    case "textarea":
                        id = returnID(attribs.id, "textArea");
                        field = new Field(id, "textArea", state);
                        canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                        canvas.schema[id] = new FieldSchema({ dataType: "string" }, {}, attribs.label, attribs.placeholder, undefined);
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                    //  Text / Label
                    case "label":
                        id = returnID(attribs.id, "text");
                        field = new Field(id, "text", state);
                        canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                        canvas.schema[id] = new FieldSchema({ dataType: "string" }, {}, attribs.label, attribs.placeholder, undefined);
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                    //  Image
                    case "img":
                        id = returnID(attribs.id, "image");
                        field = new Field(id, "image", state);
                        canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                        canvas.schema[id] = new FieldSchema({ dataType: "string" }, {}, attribs.label, attribs.placeholder, undefined);
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                    //  DATAGRID
                    case "table":
                        /** @type {?} */
                        var field = null;
                        id = returnID(attribs.id, "datagrid");
                        currentDatagrid = id;
                        field = new Field(id, "datagrid", state);
                        canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                        canvas.schema[id] = new FieldSchema({ dataType: "complex", "fields": [], isMultiple: true }, {}, attribs.label, attribs.placeholder, options);
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                    case "tr":
                        trID = attribs.id;
                        if (attribs.value) {
                            canvas.schema[currentDatagrid].default = valueSource(attribs.value, fs, path);
                        }
                        // TODO: TEST
                        break;
                    case "th":
                        dgIDs.push(attribs.id);
                        dgTypes.push(attribs.type);
                        break;
                    case "td":
                        break;
                    //  Multiselect or Dropdown
                    case "select":
                        if (attribs.multiple == "true") {
                            currentSelect = id = returnID(attribs.id, "multiSelect");
                            field = new Field(id, "multiSelect", state);
                            canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                            canvas.schema[id] = new FieldSchema({ dataType: "string", isMultiple: true }, {}, attribs.label, attribs.placeholder, options);
                        }
                        else {
                            currentSelect = id = returnID(attribs.id, "dropDown");
                            field = new Field(id, "dropDown", state);
                            canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                            canvas.schema[id] = new FieldSchema({ dataType: "string" }, {}, attribs.label, attribs.placeholder, options);
                        }
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                    //  Value Picker
                    case "search":
                        id = returnID(attribs.id, "valuePicker");
                        field = new Field(id, "valuePicker", state);
                        canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                        canvas.schema[id] = new FieldSchema({ dataType: "reference", referenceType: attribs.referenceType }, {}, attribs.label, attribs.placeholder, options || []);
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                    //  Date Time Picker
                    case "date":
                        id = returnID(attribs.id, "dateTime");
                        field = new Field(id, "dateTime", state);
                        canvas.layout.getPage(currentPage.id).getSection(currentSection.id).addField(field);
                        canvas.schema[id] = new FieldSchema({ dataType: "dateTime" }, {}, attribs.label, attribs.placeholder, undefined);
                        checkAttributes(attribs, field, id, canvas, fs, path);
                        break;
                }
            },
            ontext: function (text) {
                //      SELECT & MULTISELECT OPTIONS
                if (currentSelect != null) {
                    options.push(valueSource(text, fs, path));
                }
                //      DATAGRID
                if (trID == "cols") {
                    dgLabels.push(valueSource(text, fs, path));
                }
                if (trID == "data") {
                    dgData.push(valueSource(text, fs, path));
                }
            },
            onclosetag: function (tagname) {
                if (tagname === "select" && options.length > 0) {
                    canvas.schema[currentSelect].valueList = options;
                    currentSelect = null;
                    options = [];
                }
                //      DATAGRID
                if (tagname === "table") {
                    canvas.schema[currentDatagrid]["type"]["fields"] = [];
                    canvas.schema[currentDatagrid]["default"] = [];
                    for (var i in dgLabels) {
                        canvas.schema[currentDatagrid]["type"]["fields"].push({
                            "label": dgLabels[i],
                            "id": dgIDs[i],
                            "type": {
                                "dataType": dgTypes[i]
                            }
                        });
                    }
                    /** @type {?} */
                    var cnt = 0;
                    /** @type {?} */
                    var data = {};
                    for (var j in dgData) {
                        data[dgIDs[cnt]] = dgData[j];
                        cnt++;
                        if (cnt > 2) {
                            cnt = 0;
                            canvas.schema[currentDatagrid]["default"].push(data);
                            data = {};
                        }
                    }
                    currentDatagrid = null;
                    dgIDs = [];
                    dgData = [];
                    dgLabels = [];
                    dgTypes = [];
                }
            }
        }, { decodeEntities: true });
        parser.write(html);
        parser.end();
        return {
            name: formName,
            form: canvas
        };
    };
    /** *
     * **************************************
      @type {?} */
    var fs = require('fs');
    /** @type {?} */
    var path = require('path');
    var AppServerModuleNgFactory = require('../../../dist/custom-form-server/main').AppServerModuleNgFactory;
    renderModuleFactory(AppServerModuleNgFactory, {
        document: '<app-root></app-root>',
        url: '/'
    })
        .then(function (html) {
        /** @type {?} */
        var generated = generateJSONForm(canvas, fs, path, html);
        /** @type {?} */
        var canvas = generated.form;
        /** @type {?} */
        var name = generated.name;
        try {
            fs.writeFileSync(path.join('bin/', name + '.json'), JSON.stringify(canvas));
        }
        catch (e) {
            console.log('renderModuleFactory creating the custom form json file: ' + e);
        }
    })
        .catch(function (err) {
        console.log(err.message);
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlcmVuZC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2N1c3QtZm9ybS1idWlsZGVyLyIsInNvdXJjZXMiOlsibGliL3ByZXJlbmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU07SUFDRixPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUNsQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNwQixJQUFBLDZFQUFtQixDQUF5Qzs7SUFFcEUsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDOztJQUcxQyxJQUFJLE1BQU0sR0FBRztRQUNULElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO0tBQ25CLENBQUE7SUFFRCxNQUFNLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxVQUFVLElBQUk7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDekIsQ0FBQztJQUVGLE1BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLFVBQVUsRUFBRTtRQUNuQyxLQUFLLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUU7Z0JBQ3hCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUN4QjtTQUNKO1FBQ0QsT0FBTyxJQUFJLENBQUM7S0FDZixDQUFDOzs7O0lBSUYsSUFBSSxNQUFNLEdBQUc7UUFDVCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7S0FDckIsQ0FBQzs7OztJQUlGLElBQUksSUFBSSxHQUFHLFVBQVUsRUFBRSxFQUFFLFFBQVEsRUFBRSxLQUFL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LE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dDQUMvRyxlQUFlLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztnQ0FDdEQsTUFBTTs7NEJBR1YsS0FBSyxVQUFVO2dDQUNYLEVBQUUsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxlQUFlLENBQUMsQ0FBQztnQ0FDM0MsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUUsRUFBRSxlQUFlLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0NBQzlDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQ0FDcEYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dDQUNySCxlQUFlLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztnQ0FDdEQsTUFBTTs7NEJBR1YsS0FBSyxRQUFRO2dDQUNULElBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRTtvQ0FDL0MsRUFBRSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLGNBQWMsQ0FBQyxDQUFDO29D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QyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ3BGLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQzt3QkFDL0csZUFBZSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBQ3RELE1BQU07O29CQUdWLEtBQUssT0FBTzt3QkFDUixFQUFFLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7d0JBQ2xDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO3dCQUNyQyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ3BGLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQzt3QkFDL0csZUFBZSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBQ3RELE1BQU07O29CQUdWLEtBQUssS0FBSzt3QkFDTixFQUFFLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBQ25DLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO3dCQUN0QyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ3BGLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsQ0FBQzt3QkFDL0csZUFBZSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBQ3RELE1BQU07O29CQUlWLEtBQUssT0FBTzs7d0JBQ1IsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO3dCQUNqQixFQUFFLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsVUFBVSxDQUFDLENBQUM7d0JBQ3RDLGVBQWUsR0FBRyxFQUFFLENBQUM7d0JBQ3JCLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLEVBQUUsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO3dCQUN6QyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ3BGLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7d0JBQzlJLGVBQWUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO3dCQUN0RCxNQUFNO29CQUVWLEtBQUssSUFBSTt3QkFDTCxJQUFJLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQzt3QkFDbEIsSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFOzRCQUNmLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQzt5QkFDakY7O3dCQUVELE1BQU07b0JBRVYsS0FBSyxJQUFJO3dCQUNMLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFDO3dCQUN2QixPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDM0IsTUFBSztvQkFFVCxLQUFLLElBQUk7d0JBQ0wsTUFBTTs7b0JBR1YsS0FBSyxRQUFRO3dCQUVULElBQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxNQUFNLEVBQUU7NEJBQzVCLGFBQWEsR0FBRyxFQUFFLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsYUFBYSxDQUFDLENBQUM7NEJBQ3pELEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLEVBQUUsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFDOzRCQUM1QyxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7NEJBQ3BGLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxXQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO3lCQUNsSTs2QkFDSTs0QkFDRCxhQUFhLEdBQUcsRUFBRSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLFVBQVUsQ0FBQyxDQUFDOzRCQUN0RCxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQzs0QkFDekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDOzRCQUNwRixNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7eUJBQ2hIO3dCQUNELGVBQWUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO3dCQUN0RCxNQUFNOztvQkFHVixLQUFLLFFBQVE7d0JBQ1QsRUFBRSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQyxDQUFDO3dCQUN6QyxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxFQUFFLGFBQWEsRUFBRSxLQUFLLENBQUMsQ0FBQzt3QkFDNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxjQUFjLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUNwRixNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksV0FBVyxDQUFDLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxhQUFhLEVBQUUsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxXQUFXLEVBQUUsT0FBTyxJQUFJLEVBQUUsQ0FBQyxDQUFDO3dCQUM1SixlQUFlLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQzt3QkFDdEQsTUFBTTs7b0JBR1YsS0FBSyxNQUFNO3dCQUNQLEVBQUUsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxVQUFVLENBQUMsQ0FBQzt3QkFDdEMsS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLEVBQUUsRUFBRSxVQUFVLEVBQUUsS0FBSyxDQUFDLENBQUM7d0JBQ3pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDcEYsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLFdBQVcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO3dCQUNqSCxlQUFlLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQzt3QkFDdEQsTUFBTTtpQkFDYjthQUNKO1lBQ0QsTUFBTSxFQUFFLFVBQVUsSUFBSTs7Z0JBRWxCLElBQUksYUFBYSxJQUFJLElBQUksRUFBRTtvQkFDdkIsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO2lCQUM3Qzs7Z0JBRUQsSUFBSSxJQUFJLElBQUksTUFBTSxFQUFFO29CQUNoQixRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQzlDO2dCQUNELElBQUksSUFBSSxJQUFJLE1BQU0sRUFBRTtvQkFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO2lCQUM1QzthQUVKO1lBQ0QsVUFBVSxFQUFFLFVBQVUsT0FBTztnQkFDekIsSUFBSSxPQUFPLEtBQUssUUFBUSxJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUM1QyxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFNBQVMsR0FBRyxPQUFPLENBQUM7b0JBQ2pELGFBQWEsR0FBRyxJQUFJLENBQUM7b0JBQ3JCLE9BQU8sR0FBRyxFQUFFLENBQUM7aUJBQ2hCOztnQkFJRCxJQUFJLE9BQU8sS0FBSyxPQUFPLEVBQUU7b0JBQ3JCLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDO29CQUN0RCxNQUFNLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztvQkFDL0MsS0FBSyxJQUFJLENBQUMsSUFBSSxRQUFRLEVBQUU7d0JBQ3BCLE1BQU0sQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUNqRDs0QkFDSSxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQzs0QkFDcEIsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7NEJBQ2QsTUFBTSxFQUFFO2dDQUNKLFVBQVUsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDOzZCQUN6Qjt5QkFDSixDQUFDLENBQUM7cUJBQ1Y7O29CQUNELElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQzs7b0JBQ1osSUFBSSxJQUFJLEdBQUcsRUFBRSxDQUFDO29CQUNkLEtBQUssSUFBSSxDQUFDLElBQUksTUFBTSxFQUFFO3dCQUNsQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUM3QixHQUFHLEVBQUUsQ0FBQzt3QkFDTixJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUU7NEJBQ1QsR0FBRyxHQUFHLENBQUMsQ0FBQzs0QkFDUixNQUFNLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs0QkFDckQsSUFBSSxHQUFHLEVBQUUsQ0FBQzt5QkFDYjtxQkFDSjtvQkFFRCxlQUFlLEdBQUcsSUFBSSxDQUFDO29CQUN2QixLQUFLLEdBQUcsRUFBRSxDQUFDO29CQUNYLE1BQU0sR0FBRyxFQUFFLENBQUM7b0JBQ1osUUFBUSxHQUFHLEVBQUUsQ0FBQztvQkFDZCxPQUFPLEdBQUcsRUFBRSxDQUFDO2lCQUNoQjthQUVKO1NBRUosRUFBRSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1FBRTdCLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbkIsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBRWIsT0FBTztZQUNILElBQUksRUFBRSxRQUFRO1lBQ2QsSUFBSSxFQUFFLE1BQU07U0FDZixDQUFDO0tBR0wsQ0FBQTs7OztJQU1ELElBQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7SUFDekIsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3JCLElBQUEsb0dBQXdCLENBQXNEO0lBRXRGLG1CQUFtQixDQUFDLHdCQUF3QixFQUFFO1FBQzFDLFFBQVEsRUFBRSx1QkFBdUI7UUFDakMsR0FBRyxFQUFFLEdBQUc7S0FDWCxDQUFDO1NBQ0csSUFBSSxDQUFDLFVBQUEsSUFBSTs7UUFDTixJQUFJLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQzs7UUFDekQsSUFBSSxNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQzs7UUFDNUIsSUFBSSxJQUFJLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQztRQUMxQixJQUFJO1lBQ0EsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLEdBQUcsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQy9FO1FBQ0QsT0FBTyxDQUFDLEVBQUU7WUFDTixPQUFPLENBQUMsR0FBRyxDQUFDLDBEQUEwRCxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQy9FO0tBQ0osQ0FBQztTQUNELEtBQUssQ0FBQyxVQUFDLEdBQUc7UUFDUCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtLQUMzQixDQUFDLENBQUM7Q0FDViIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBwcmVyZW5kKCkge1xuICAgIHJlcXVpcmUoJ3pvbmUuanMvZGlzdC96b25lLW5vZGUnKTtcbiAgICByZXF1aXJlKCdyZWZsZWN0LW1ldGFkYXRhJyk7XG4gICAgY29uc3QgeyByZW5kZXJNb2R1bGVGYWN0b3J5IH0gPSByZXF1aXJlKCdAYW5ndWxhci9wbGF0Zm9ybS1zZXJ2ZXInKTtcblxuICAgIGNvbnN0IGh0bWxwYXJzZXIgPSByZXF1aXJlKFwiaHRtbHBhcnNlcjJcIik7XG5cbiAgICAvLyBNb2RlbHMgRGVjbGFyYXRpb25zXG4gICAgdmFyIExheW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wYWdlcyA9IFtdO1xuICAgIH1cblxuICAgIExheW91dC5wcm90b3R5cGUuYWRkUGFnZSA9IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgICAgIHRoaXMucGFnZXMucHVzaChwYWdlKTtcbiAgICB9O1xuXG4gICAgTGF5b3V0LnByb3RvdHlwZS5nZXRQYWdlID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5wYWdlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMucGFnZXNbaV0uaWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYWdlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIHZhciBDYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbmV3IExheW91dCgpO1xuICAgICAgICB0aGlzLnNjaGVtYSA9IHt9O1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICB9O1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIHZhciBQYWdlID0gZnVuY3Rpb24gKGlkLCBzZWN0aW9ucywgdGl0bGUsIHN0YXRlKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHNlY3Rpb25zO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICBQYWdlLnByb3RvdHlwZS5hZGRTZWN0aW9uID0gZnVuY3Rpb24gKHNlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zZWN0aW9ucy5wdXNoKHNlY3Rpb24pO1xuICAgIH1cblxuICAgIFBhZ2UucHJvdG90eXBlLmdldFNlY3Rpb24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnNlY3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWN0aW9uc1tpXS5pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlY3Rpb25zW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIFBhZ2UucHJvdG90eXBlLnNldFRpdGxlID0gZnVuY3Rpb24gKHRpdGxlKSB7XG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgdmFyIEZpZWxkID0gZnVuY3Rpb24gKGlkLCBkaXNwbGF5LCBzdGF0ZSkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuZGlzcGxheSA9IGRpc3BsYXk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgdmFyIEZpZWxkU2NoZW1hID0gZnVuY3Rpb24gKHR5cGUsIGNvbnN0cmFpbnRzLCBsYWJlbCwgcGxhY2Vob2xkZXIsIHZhbHVlTGlzdCkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMgfHwge307XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbCB8fCB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlciB8fCB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudmFsdWVMaXN0ID0gdmFsdWVMaXN0IHx8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgdmFyIFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzW1wicmVhZC1vbmx5XCJdID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIHZhciBTZWN0aW9uID0gZnVuY3Rpb24gKGlkLCBmaWVsZHMpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLmZpZWxkcyA9IGZpZWxkcztcbiAgICB9XG5cbiAgICBTZWN0aW9uLnByb3RvdHlwZS5hZGRGaWVsZCA9IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICB0aGlzLmZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICB9XG5cbiAgICBTZWN0aW9uLnByb3RvdHlwZS5nZXRGaWVsZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuZmllbGRzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5maWVsZHNbaV0uaWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZHNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8vIFVUSUxJVFkgRlVOQ1RJT05TXG4gICAgdmFyIHJldHVybklEID0gZnVuY3Rpb24gKGF0dHJpYklELCB0eXBlKSB7XG4gICAgICAgIGlmIChhdHRyaWJJRCA9PSB1bmRlZmluZWQgfHwgYXR0cmliSUQgPT0gXCJcIikge1xuICAgICAgICAgICAgbGV0IGlkID0gdHlwZSArICdfJywgciA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZCArPSByLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByLmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYklEO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICB2YXIgdmFsdWVTb3VyY2UgPSBmdW5jdGlvbiAoc291cmNlLCBmcywgcGF0aCkge1xuICAgICAgICBpZiAoSXNKc29uU3RyaW5nKHNvdXJjZSkpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VPYmogPSBKU09OLnBhcnNlKHNvdXJjZSk7XG4gICAgICAgICAgICBpZiAoc291cmNlT2JqLmhhc093blByb3BlcnR5KCdhY3Rpb25OYW1lJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb252ZXJ0ID0gcmVxdWlyZSgneG1sLWpzJyk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHhtbCA9IGZzLnJlYWRGaWxlU3luYygnLi4vcG9tLnhtbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndmFsdWVTb3VyY2UoKSByZWFkaW5nIHBvbS54bWw6JyArIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlQ29tbWVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlRG9jdHlwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgaWdub3JlQ2RhdGE6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUluc3RydWN0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpZ25vcmVEZWNsYXJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSBjb252ZXJ0LnhtbDJqcyh4bWwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHZhciBncnBhcnRJRCA9IHBhcnNlZC5wcm9qZWN0Lmdyb3VwSWQuX3RleHQgKyAnLycgKyBwYXJzZWQucHJvamVjdC5hcnRpZmFjdElkLl90ZXh0O1xuICAgICAgICAgICAgICAgIHZhciBwYWNrYWdlSW5QYXRoRm9ybWF0ID0gZ3JwYXJ0SUQucmVwbGFjZSgvXFwuL2csICcvJykgKyAnLyc7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbignYWN0aW9ucy9zcmMvbWFpbi9yZXNvdXJjZXMvJyArIHBhY2thZ2VJblBhdGhGb3JtYXQsIHNvdXJjZU9iai5hY3Rpb25OYW1lICsgJy5qcycpLCBzb3VyY2VPYmouYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZhbHVlU291cmNlKCkgd3JpdGluZyBhY3Rpb24gZmlsZXM6JyArIGUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2NyaXB0QWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBncnBhcnRJRCArIFwiL1wiICsgc291cmNlT2JqLmFjdGlvbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHNvdXJjZU9iai5wYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vQ2hlY2sgaWYgaXQncyBhIHBhdGggdG8gYWN0aW9uXG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VPYmouaGFzT3duUHJvcGVydHkoJ3BhY2thZ2UnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2NyaXB0QWN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBzb3VyY2VPYmoucGFja2FnZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc291cmNlT2JqLnBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vQ2hlY2tzIGlmIGl0J3MgY29uZGl0aW9uIG9yIGNvbXB1dGVkIHZhbHVlIE9SIGl0J3MgQWN0aW9uIEZyb20gSW1wb3J0ZWQgQ3VzdG9tIEZvcm1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZU9iai5oYXNPd25Qcm9wZXJ0eSgnYmluZCcpIHx8IHNvdXJjZU9iai5oYXNPd25Qcm9wZXJ0eSgndHlwZScpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZU9iajtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHNvdXJjZSBpcyBzb21lIGtpbmQgb2YgY29uc3RcbiAgICAgICAgaWYgKHNvdXJjZSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc291cmNlID09IFwiZmFsc2VcIikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNvdXJjZS5zdGFydHNXaXRoKFwiW3tcIikgfHwgc291cmNlLnN0YXJ0c1dpdGgoXCJ7XCIpIHx8IHNvdXJjZS5zdGFydHNXaXRoKFwiWydcIikpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc291cmNlLnJlcGxhY2UoL1xcJy9nLCAnXFxcIicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ2YWx1ZVNvdXJjZSgpIC0tLT4gZWxzZSBpZiAoc291cmNlLnN0YXJ0c1dpdGguLi46IFwiLCBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzTmFOKHBhcnNlSW50KHNvdXJjZSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNvdXJjZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBJc0pzb25TdHJpbmcoc3RyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgY29uc3QgY2hlY2tBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKGF0dHJpYnMsIGZpZWxkLCBpZCwgY2FudmFzLCBmcywgcGF0aCkge1xuICAgICAgICBpZiAoYXR0cmlicy52aXNpYmlsaXR5KSB7XG4gICAgICAgICAgICBmaWVsZC5zdGF0ZS52aXNpYmxlID0gdmFsdWVTb3VyY2UoYXR0cmlicy52aXNpYmlsaXR5LCBmcywgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJpYnMucmVhZG9ubHkpIHtcbiAgICAgICAgICAgIGZpZWxkLnN0YXRlW1wicmVhZC1vbmx5XCJdID0gdmFsdWVTb3VyY2UoYXR0cmlicy5yZWFkb25seSwgZnMsIHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyaWJzLnZhbHVlKSB7XG4gICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXS5kZWZhdWx0ID0gdmFsdWVTb3VyY2UoYXR0cmlicy52YWx1ZSwgZnMsIHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyaWJzLnZhbHVlTGlzdCkge1xuXG4gICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXS52YWx1ZUxpc3QgPSB2YWx1ZVNvdXJjZShhdHRyaWJzLnZhbHVlTGlzdCwgZnMsIHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyaWJzLmJpbmQpIHtcbiAgICAgICAgICAgIGlmIChhdHRyaWJzLmJpbmQuc3RhcnRzV2l0aCgneycpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0uZGVmYXVsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmQ6IEpTT04ucGFyc2UoYXR0cmlicy5iaW5kLnJlcGxhY2UoL1xcJy9nLCAnXFxcIicpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNoZWNrQXR0cmlidXRlcygpIC0tLT4gYXR0cmlicy5iaW5kXCIsIGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdLmRlZmF1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmQ6IGF0dHJpYnMuYmluZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyaWJzLnNpZ25wb3N0KSB7XG4gICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXS5zaWducG9zdCA9IGF0dHJpYnMuc2lnbnBvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJpYnMuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdLmRlc2NyaXB0aW9uID0gYXR0cmlicy5kZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vICBDb25zdHJhaW50c1xuICAgICAgICBpZiAoYXR0cmlicy5yZXF1aXJlZCkge1xuICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0uY29uc3RyYWludHMucmVxdWlyZWQgPSB2YWx1ZVNvdXJjZShhdHRyaWJzLnJlcXVpcmVkLCBmcywgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF0dHJpYnMucmVnZXgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZ2V4T2JqID0gSlNPTi5wYXJzZShhdHRyaWJzLnJlZ2V4LnJlcGxhY2UoL1xcJy9nLCAnXFxcIicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjaGVja0F0dHJpYnV0ZXMoKSAtLS0+IGF0dHJpYnMucmVnZXhcIiwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPYmplY3QuYXNzaWduKGNhbnZhcy5zY2hlbWFbaWRdLmNvbnN0cmFpbnRzLCByZWdleE9iaik7XG4gICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXS5jb25zdHJhaW50c1tcInBhdHRlcm5cIl0gPSByZWdleE9iajtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlicy5taW4pIHtcbiAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdLmNvbnN0cmFpbnRzW1wibWluLXZhbHVlXCJdID0gdmFsdWVTb3VyY2UoYXR0cmlicy5taW4sIGZzLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlicy5tYXgpIHtcbiAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdLmNvbnN0cmFpbnRzW1wibWF4LXZhbHVlXCJdID0gdmFsdWVTb3VyY2UoYXR0cmlicy5tYXgsIGZzLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlicy5tYXRjaCkge1xuICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0uY29uc3RyYWludHMubWF0Y2ggPSBhdHRyaWJzLm1hdGNoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhdHRyaWJzLm11bHRpcGxlIHx8IGF0dHJpYnMubXVsdGlwbGUgPT0gXCJmYWxzZVwiKSB7XG4gICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXS50eXBlLmlzTXVsdGlwbGUgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vRXh0ZXJuYWwgVmFsaWRhdGlvblxuICAgICAgICBpZiAoYXR0cmlicy5vcHRpb25zKSB7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4dFZhbCA9IEpTT04ucGFyc2UoYXR0cmlicy5vcHRpb25zLnJlcGxhY2UoL1xcJy9nLCAnXFxcIicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjaGVja0F0dHJpYnV0ZXMoKSAtLS0+IGF0dHJpYnMub3B0aW9uc1wiLCBlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZXh0VmFsLnNvdXJjZSA9IHZhbHVlU291cmNlKEpTT04uc3RyaW5naWZ5KGV4dFZhbC5zb3VyY2UpLCBmcywgcGF0aCk7XG4gICAgICAgICAgICBjYW52YXMub3B0aW9uc1tcImV4dGVybmFsVmFsaWRhdGlvbnNcIl0gPSBbXTtcbiAgICAgICAgICAgIGNhbnZhcy5vcHRpb25zW1wiZXh0ZXJuYWxWYWxpZGF0aW9uc1wiXS5wdXNoKGV4dFZhbCk7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvLyBKU09OIEZPUk0gR0VORVJBVElPTiBGVU5DVElPTlxuICAgIHZhciBnZW5lcmF0ZUpTT05Gb3JtID0gZnVuY3Rpb24gKGNhbnZhcywgZnMsIHBhdGgsIGh0bWwpIHtcbiAgICAgICAgY2FudmFzID0gbmV3IENhbnZhcygpO1xuICAgICAgICB2YXIgZm9ybU5hbWUgPSBcIlwiO1xuICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSBudWxsO1xuICAgICAgICB2YXIgY3VycmVudFNlY3Rpb24gPSBudWxsO1xuICAgICAgICB2YXIgY3VycmVudFNlbGVjdCA9IG51bGw7XG4gICAgICAgIHZhciBvcHRpb25zID0gW107XG5cbiAgICAgICAgLy8gICAgICBWYXJpYWJsZXMgZm9yIERhdGFHcmlkXG4gICAgICAgIHZhciB0cklEID0gbnVsbDtcbiAgICAgICAgdmFyIGRnTGFiZWxzID0gW107XG4gICAgICAgIHZhciBkZ0lEcyA9IFtdO1xuICAgICAgICB2YXIgZGdUeXBlcyA9IFtdO1xuICAgICAgICB2YXIgZGdEYXRhID0gW107XG4gICAgICAgIHZhciBjdXJyZW50RGF0YWdyaWQgPSBudWxsO1xuXG5cblxuICAgICAgICB2YXIgcGFyc2VyID0gbmV3IGh0bWxwYXJzZXIuUGFyc2VyKHtcblxuICAgICAgICAgICAgb25vcGVudGFnOiBmdW5jdGlvbiAobmFtZSwgYXR0cmlicykge1xuICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gXCJcIjtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSBuZXcgU3RhdGUoKTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAvL1RoZSBGb3JtXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJzLmNsYXNzID09IFwiY3VzdG9tLWZvcm1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1OYW1lID0gYXR0cmlicy5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybU5hbWUgPSBcImRlZmF1dEZvcm1OYW1lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyAgUGFnZS9UYWJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZvcm1cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UgPSBuZXcgUGFnZShhdHRyaWJzLmlkIHx8IFwiR2VuZXJhbFwiLCBbXSwgYXR0cmlicy50aXRsZSB8fCBcIkdlbmVyYWxcIiwge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZSA9IG5ldyBQYWdlKHJldHVybklEKGF0dHJpYnMuaWQsIFwicGFnZVwiKSwgW10sIGF0dHJpYnMudGl0bGUgfHwgXCJOZXcgVGFiXCIsIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJzLnZpc2liaWxpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFnZS5zdGF0ZS52aXNpYmxlID0gdmFsdWVTb3VyY2UoYXR0cmlicy52aXNpYmlsaXR5LCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMubGF5b3V0LmFkZFBhZ2UoY3VycmVudFBhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gIFNlY3Rpb24gICAgXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzZWN0aW9uXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2VjdGlvbiA9IG5ldyBTZWN0aW9uKHJldHVybklEKGF0dHJpYnMuaWQsIFwic2VjdGlvblwiKSwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5hZGRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImlucHV0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnMudHlwZSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIFRleHQgRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHJldHVybklEKGF0dHJpYnMuaWQsIFwidGV4dEZpZWxkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCA9IG5ldyBGaWVsZChpZCwgXCJ0ZXh0RmllbGRcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMubGF5b3V0LmdldFBhZ2UoY3VycmVudFBhZ2UuaWQpLmdldFNlY3Rpb24oY3VycmVudFNlY3Rpb24uaWQpLmFkZEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0gPSBuZXcgRmllbGRTY2hlbWEoeyBkYXRhVHlwZTogXCJzdHJpbmdcIiB9LCB7fSwgYXR0cmlicy5sYWJlbCwgYXR0cmlicy5wbGFjZWhvbGRlciwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tBdHRyaWJ1dGVzKGF0dHJpYnMsIGZpZWxkLCBpZCwgY2FudmFzLCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFzc3dvcmQgRmllbGRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSByZXR1cm5JRChhdHRyaWJzLmlkLCBcInBhc3N3b3JkRmllbGRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkID0gbmV3IEZpZWxkKGlkLCBcInBhc3N3b3JkRmllbGRcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMubGF5b3V0LmdldFBhZ2UoY3VycmVudFBhZ2UuaWQpLmdldFNlY3Rpb24oY3VycmVudFNlY3Rpb24uaWQpLmFkZEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0gPSBuZXcgRmllbGRTY2hlbWEoeyBkYXRhVHlwZTogXCJzZWN1cmVTdHJpbmdcIiB9LCB7fSwgYXR0cmlicy5sYWJlbCwgYXR0cmlicy5wbGFjZWhvbGRlciwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tBdHRyaWJ1dGVzKGF0dHJpYnMsIGZpZWxkLCBpZCwgY2FudmFzLCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVjaW1hbCBvciBJbnRlZ2VyIEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlicy5zdGVwICYmIGF0dHJpYnMuc3RlcC5zdGFydHNXaXRoKFwiMC5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gcmV0dXJuSUQoYXR0cmlicy5pZCwgXCJkZWNpbWFsRmllbGRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCA9IG5ldyBGaWVsZChpZCwgXCJkZWNpbWFsRmllbGRcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5nZXRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uLmlkKS5hZGRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXSA9IG5ldyBGaWVsZFNjaGVtYSh7IGRhdGFUeXBlOiBcImRlY2ltYWxcIiB9LCB7fSwgYXR0cmlicy5sYWJlbCwgYXR0cmlicy5wbGFjZWhvbGRlciwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlcyhhdHRyaWJzLCBmaWVsZCwgaWQsIGNhbnZhcywgZnMsIHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0uc3RlcCA9IHBhcnNlSW50KGF0dHJpYnMuc3RlcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHJldHVybklEKGF0dHJpYnMuaWQsIFwiaW50ZWdlckZpZWxkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBuZXcgRmllbGQoaWQsIFwiaW50ZWdlckZpZWxkXCIsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5sYXlvdXQuZ2V0UGFnZShjdXJyZW50UGFnZS5pZCkuZ2V0U2VjdGlvbihjdXJyZW50U2VjdGlvbi5pZCkuYWRkRmllbGQoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0gPSBuZXcgRmllbGRTY2hlbWEoeyBkYXRhVHlwZTogXCJpbnRlZ2VyXCIgfSwge30sIGF0dHJpYnMubGFiZWwsIGF0dHJpYnMucGxhY2Vob2xkZXIsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja0F0dHJpYnV0ZXMoYXR0cmlicywgZmllbGQsIGlkLCBjYW52YXMsIGZzLCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdLnN0ZXAgPSBwYXJzZUludChhdHRyaWJzLnN0ZXApIHx8IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVja0JveFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNoZWNrYm94XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gcmV0dXJuSUQoYXR0cmlicy5pZCwgXCJjaGVja2JveFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBuZXcgRmllbGQoaWQsIFwiY2hlY2tib3hcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMubGF5b3V0LmdldFBhZ2UoY3VycmVudFBhZ2UuaWQpLmdldFNlY3Rpb24oY3VycmVudFNlY3Rpb24uaWQpLmFkZEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0gPSBuZXcgRmllbGRTY2hlbWEoeyBkYXRhVHlwZTogXCJib29sZWFuXCIgfSwge30sIGF0dHJpYnMubGFiZWwsIGF0dHJpYnMucGxhY2Vob2xkZXIsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlcyhhdHRyaWJzLCBmaWVsZCwgaWQsIGNhbnZhcywgZnMsIHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vICBUZXh0IEFyZWFcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHRhcmVhXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHJldHVybklEKGF0dHJpYnMuaWQsIFwidGV4dEFyZWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCA9IG5ldyBGaWVsZChpZCwgXCJ0ZXh0QXJlYVwiLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMubGF5b3V0LmdldFBhZ2UoY3VycmVudFBhZ2UuaWQpLmdldFNlY3Rpb24oY3VycmVudFNlY3Rpb24uaWQpLmFkZEZpZWxkKGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdID0gbmV3IEZpZWxkU2NoZW1hKHsgZGF0YVR5cGU6IFwic3RyaW5nXCIgfSwge30sIGF0dHJpYnMubGFiZWwsIGF0dHJpYnMucGxhY2Vob2xkZXIsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0F0dHJpYnV0ZXMoYXR0cmlicywgZmllbGQsIGlkLCBjYW52YXMsIGZzLCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vICBUZXh0IC8gTGFiZWxcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxhYmVsXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHJldHVybklEKGF0dHJpYnMuaWQsIFwidGV4dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkID0gbmV3IEZpZWxkKGlkLCBcInRleHRcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5nZXRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uLmlkKS5hZGRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXSA9IG5ldyBGaWVsZFNjaGVtYSh7IGRhdGFUeXBlOiBcInN0cmluZ1wiIH0sIHt9LCBhdHRyaWJzLmxhYmVsLCBhdHRyaWJzLnBsYWNlaG9sZGVyLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tBdHRyaWJ1dGVzKGF0dHJpYnMsIGZpZWxkLCBpZCwgY2FudmFzLCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyAgSW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImltZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSByZXR1cm5JRChhdHRyaWJzLmlkLCBcImltYWdlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBuZXcgRmllbGQoaWQsIFwiaW1hZ2VcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5nZXRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uLmlkKS5hZGRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXSA9IG5ldyBGaWVsZFNjaGVtYSh7IGRhdGFUeXBlOiBcInN0cmluZ1wiIH0sIHt9LCBhdHRyaWJzLmxhYmVsLCBhdHRyaWJzLnBsYWNlaG9sZGVyLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tBdHRyaWJ1dGVzKGF0dHJpYnMsIGZpZWxkLCBpZCwgY2FudmFzLCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuXG4gICAgICAgICAgICAgICAgICAgIC8vICBEQVRBR1JJRFxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGFibGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHJldHVybklEKGF0dHJpYnMuaWQsIFwiZGF0YWdyaWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGF0YWdyaWQgPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkID0gbmV3IEZpZWxkKGlkLCBcImRhdGFncmlkXCIsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5sYXlvdXQuZ2V0UGFnZShjdXJyZW50UGFnZS5pZCkuZ2V0U2VjdGlvbihjdXJyZW50U2VjdGlvbi5pZCkuYWRkRmllbGQoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0gPSBuZXcgRmllbGRTY2hlbWEoeyBkYXRhVHlwZTogXCJjb21wbGV4XCIsIFwiZmllbGRzXCI6IFtdLCBpc011bHRpcGxlOiB0cnVlIH0sIHt9LCBhdHRyaWJzLmxhYmVsLCBhdHRyaWJzLnBsYWNlaG9sZGVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrQXR0cmlidXRlcyhhdHRyaWJzLCBmaWVsZCwgaWQsIGNhbnZhcywgZnMsIHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0cklEID0gYXR0cmlicy5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJzLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtjdXJyZW50RGF0YWdyaWRdLmRlZmF1bHQgPSB2YWx1ZVNvdXJjZShhdHRyaWJzLnZhbHVlLCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBURVNUXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRnSURzLnB1c2goYXR0cmlicy5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZ1R5cGVzLnB1c2goYXR0cmlicy50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyAgTXVsdGlzZWxlY3Qgb3IgRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNlbGVjdFwiOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlicy5tdWx0aXBsZSA9PSBcInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3QgPSBpZCA9IHJldHVybklEKGF0dHJpYnMuaWQsIFwibXVsdGlTZWxlY3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBuZXcgRmllbGQoaWQsIFwibXVsdGlTZWxlY3RcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5sYXlvdXQuZ2V0UGFnZShjdXJyZW50UGFnZS5pZCkuZ2V0U2VjdGlvbihjdXJyZW50U2VjdGlvbi5pZCkuYWRkRmllbGQoZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbaWRdID0gbmV3IEZpZWxkU2NoZW1hKHsgZGF0YVR5cGU6IFwic3RyaW5nXCIsIGlzTXVsdGlwbGU6IHRydWUgfSwge30sIGF0dHJpYnMubGFiZWwsIGF0dHJpYnMucGxhY2Vob2xkZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFNlbGVjdCA9IGlkID0gcmV0dXJuSUQoYXR0cmlicy5pZCwgXCJkcm9wRG93blwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZCA9IG5ldyBGaWVsZChpZCwgXCJkcm9wRG93blwiLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5nZXRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uLmlkKS5hZGRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtpZF0gPSBuZXcgRmllbGRTY2hlbWEoeyBkYXRhVHlwZTogXCJzdHJpbmdcIiB9LCB7fSwgYXR0cmlicy5sYWJlbCwgYXR0cmlicy5wbGFjZWhvbGRlciwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0F0dHJpYnV0ZXMoYXR0cmlicywgZmllbGQsIGlkLCBjYW52YXMsIGZzLCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vICBWYWx1ZSBQaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNlYXJjaFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSByZXR1cm5JRChhdHRyaWJzLmlkLCBcInZhbHVlUGlja2VyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBuZXcgRmllbGQoaWQsIFwidmFsdWVQaWNrZXJcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5nZXRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uLmlkKS5hZGRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXSA9IG5ldyBGaWVsZFNjaGVtYSh7IGRhdGFUeXBlOiBcInJlZmVyZW5jZVwiLCByZWZlcmVuY2VUeXBlOiBhdHRyaWJzLnJlZmVyZW5jZVR5cGUgfSwge30sIGF0dHJpYnMubGFiZWwsIGF0dHJpYnMucGxhY2Vob2xkZXIsIG9wdGlvbnMgfHwgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tBdHRyaWJ1dGVzKGF0dHJpYnMsIGZpZWxkLCBpZCwgY2FudmFzLCBmcywgcGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyAgRGF0ZSBUaW1lIFBpY2tlclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSByZXR1cm5JRChhdHRyaWJzLmlkLCBcImRhdGVUaW1lXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQgPSBuZXcgRmllbGQoaWQsIFwiZGF0ZVRpbWVcIiwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLmxheW91dC5nZXRQYWdlKGN1cnJlbnRQYWdlLmlkKS5nZXRTZWN0aW9uKGN1cnJlbnRTZWN0aW9uLmlkKS5hZGRGaWVsZChmaWVsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2lkXSA9IG5ldyBGaWVsZFNjaGVtYSh7IGRhdGFUeXBlOiBcImRhdGVUaW1lXCIgfSwge30sIGF0dHJpYnMubGFiZWwsIGF0dHJpYnMucGxhY2Vob2xkZXIsIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0F0dHJpYnV0ZXMoYXR0cmlicywgZmllbGQsIGlkLCBjYW52YXMsIGZzLCBwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbnRleHQ6IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICBTRUxFQ1QgJiBNVUxUSVNFTEVDVCBPUFRJT05TXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWxlY3QgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2godmFsdWVTb3VyY2UodGV4dCwgZnMsIHBhdGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgICBEQVRBR1JJRFxuICAgICAgICAgICAgICAgIGlmICh0cklEID09IFwiY29sc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGRnTGFiZWxzLnB1c2godmFsdWVTb3VyY2UodGV4dCwgZnMsIHBhdGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRySUQgPT0gXCJkYXRhXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGdEYXRhLnB1c2godmFsdWVTb3VyY2UodGV4dCwgZnMsIHBhdGgpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmNsb3NldGFnOiBmdW5jdGlvbiAodGFnbmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0YWduYW1lID09PSBcInNlbGVjdFwiICYmIG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2N1cnJlbnRTZWxlY3RdLnZhbHVlTGlzdCA9IG9wdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTZWxlY3QgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gW107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gICAgICBEQVRBR1JJRFxuXG4gICAgICAgICAgICAgICAgaWYgKHRhZ25hbWUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuc2NoZW1hW2N1cnJlbnREYXRhZ3JpZF1bXCJ0eXBlXCJdW1wiZmllbGRzXCJdID0gW107XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5zY2hlbWFbY3VycmVudERhdGFncmlkXVtcImRlZmF1bHRcIl0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBkZ0xhYmVscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtjdXJyZW50RGF0YWdyaWRdW1widHlwZVwiXVtcImZpZWxkc1wiXS5wdXNoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJsYWJlbFwiOiBkZ0xhYmVsc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJpZFwiOiBkZ0lEc1tpXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YVR5cGVcIjogZGdUeXBlc1tpXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gZGdEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW2RnSURzW2NudF1dID0gZGdEYXRhW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY250Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY250ID4gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLnNjaGVtYVtjdXJyZW50RGF0YWdyaWRdW1wiZGVmYXVsdFwiXS5wdXNoKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnREYXRhZ3JpZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGRnSURzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGRnRGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBkZ0xhYmVscyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBkZ1R5cGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSwgeyBkZWNvZGVFbnRpdGllczogdHJ1ZSB9KTtcblxuICAgICAgICBwYXJzZXIud3JpdGUoaHRtbCk7XG4gICAgICAgIHBhcnNlci5lbmQoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogZm9ybU5hbWUsXG4gICAgICAgICAgICBmb3JtOiBjYW52YXNcbiAgICAgICAgfTtcblxuXG4gICAgfVxuXG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgLy8gUFJFUkVOREVSXG4gICAgY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuICAgIGNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG4gICAgY29uc3QgeyBBcHBTZXJ2ZXJNb2R1bGVOZ0ZhY3RvcnkgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2Rpc3QvY3VzdG9tLWZvcm0tc2VydmVyL21haW4nKTtcblxuICAgIHJlbmRlck1vZHVsZUZhY3RvcnkoQXBwU2VydmVyTW9kdWxlTmdGYWN0b3J5LCB7XG4gICAgICAgIGRvY3VtZW50OiAnPGFwcC1yb290PjwvYXBwLXJvb3Q+JyxcbiAgICAgICAgdXJsOiAnLydcbiAgICB9KVxuICAgICAgICAudGhlbihodG1sID0+IHtcbiAgICAgICAgICAgIHZhciBnZW5lcmF0ZWQgPSBnZW5lcmF0ZUpTT05Gb3JtKGNhbnZhcywgZnMsIHBhdGgsIGh0bWwpO1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGdlbmVyYXRlZC5mb3JtO1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBnZW5lcmF0ZWQubmFtZTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4oJ2Jpbi8nLCBuYW1lICsgJy5qc29uJyksIEpTT04uc3RyaW5naWZ5KGNhbnZhcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVuZGVyTW9kdWxlRmFjdG9yeSBjcmVhdGluZyB0aGUgY3VzdG9tIGZvcm0ganNvbiBmaWxlOiAnICsgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSlcbiAgICAgICAgfSk7XG59XG4iXX0=